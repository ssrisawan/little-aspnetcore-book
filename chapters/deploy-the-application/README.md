# การนำส่งแอปพลิเคชัน
เรามากันได้ไกลแล้วแต่ก็ยังไม่เรียบร้อยดีนัก หลังจากเราได้สร้างแอปพลิเคชันดี ๆ ขึ้นมาแล้ว ก็ถึงเวลาต้องบอกให้โลกรู้!

เนื่องจากแอปพลิเคชัน ASP.NET Core สามารถรันบนวินโดวส์ แมค หรือลินุกซ์ก็ได้ การนำส่งแอปพลิเคชันจึงสามารถทำได้หลายวิธี ในบทนี้เราจะได้ลองใช้วิธีที่นิยมใช้ (และง่าย) ที่สุดในการนำไปใช้งานจริง

## ทางเลือกในการนำส่ง

โดยทั่วไป แอปพลิเคชัน ASP.NET Core มักถูกนำส่งขึ้นไปยังสภาพแวดล้อมดังต่อไปนี้:

* **โฮสต์ดอคเกอร์ (Docker host)** เครื่องใดก็ตามที่สามารถรองรับคอนเทนเนอร์ของดอคเกอร์ได้ก็สามารถนำมาใช้รองรับแอปพลิเคชัน ASP.NET Core ได้เช่นกัน การสร้างอิมเมจของดอคเกอร์เป็นวิธีที่ทำให้นำส่งแอปพลิเคชันได้อย่างรวดเร็ว โดยเฉพาะอย่างยิ่งหากคุ้นเคยกับดอคเกอร์อยู่แล้ว (อย่ากังวลไปหากคุณยังไม่คุ้นเคยกับดอคเกอร์! เราจะลองทำตามขั้นตอนนเป็นลำดับไปในภายหลัง)

* **อาชัวร์ (Azure)** ไมโครซอฟต์อาชัวร์รองรับแอปพลิเคชัน ASP.NET Core โดยตรง ดังนั้นหากคุณสมัครใช้บริการอยู่แล้ว ก็สามารถสร้างเว็บแอปขึ้นมาแล้วอัพโหลดไฟล์โปรเจกต์ขึ้นไปทันที เราจะได้ลองทำขั้นตอนเหล่านี้ด้วยอาชัวร์ CLI ในหัวข้อถัดไป

* **ลินุกซ์ (ด้วย Nginx)** หากไม่ต้องการใช้ดอคเกอร์ เราก็สามารถใช้แอปพลิเคชันบนเซอร์ฟเวอร์ลินุกซ์เครื่องใดก็ได้ (ซึ่งรวมถึงเวอร์ชวลแมชชีนบน Amazon EC2 และ DigitalOcean) โดยทั่วไปแล้วจะเป็นการจับคู่ ASP.NET Core เข้ากับรีเวิร์สพรอกซี Nginx (จะอธิบายเกี่ยวกับ Nginx เพิ่มเติมด้านล่างนี้)

* **วินโดวส์** เราสามารถใช้เว็บเซอร์ฟเวอร์ IIS บนวินโดวส์เพื่อใช้งานแอปพลิเคชัน ASP.NET Core ได้ แต่โดยทั่วไป การนำส่งขึ้นไปบนอาชัวร์มักกระทำได้ง่ายกว่า (และราคาถูกกว่า) แต่ถ้าคุณต้องการจัดการเซอร์ฟเวอร์วินโดวส์ด้วยตัวเองก็สามารถทำงานได้ดีเช่นกัน

## เคสเตรล (Kestrel) และรีเวิร์สพรอกซี

> หากคุณไม่ได้สนใจเกี่ยวกับการทำงานภายในและหลักการในการทำงานของแอปพลิเคชัน ASP.NET Core เพียงต้องการแค่คำแนะนำและขั้นตอนที่ต้องทำเท่านั้น ก็สามารถข้ามไปยังหนึ่งในสองหัวข้อถัดไปได้เลย

ASP.NET Core ได้รวมเอาเว็บเซอร์ฟเวอร์ขนาดเล็กที่ทำงานได้อย่างรวดเร็วเรียกว่าเคสเตรลอยู่ด้วยแล้ว นี่คือเซอร์ฟเวอร์ที่เราใช้งานอยู่ทุกครั้งที่รัน `dotnet run` แล้วเปิดเบราว์เซอร์ไปยัง `http://localhost:5000` เมื่อเรานำส่งแอปพลิเคชันไปยังสภาพแวดล้อมเพื่อใช้งานจริง เคสเตรลก็ยังทำงานอยู่เบื้องหลัง อย่างไรก็ตาม เนื่องจากเคสเตรลยังไม่มีความสามารถในการกระจายภาระงานและความสามารถอื่น ๆ ที่มีในเว็บเซอร์ฟเวอร์ที่ใช้กันแพร่หลาย จึงขอแนะนำให้รันเคสเตรลไว้หลังรีเวิร์สพรอกซีแทน

บนลินุกซ์ (และในคอนเทนเนอร์ของดอคเกอร์) เราสามารถใช้เว็บเซอร์ฟเวอร์ Nginx หรือ Apache เพื่อรับคำขอใช้งานจากอินเทอร์เน็ตแล้วส่งต่อคำขอเหล่านั้นไปยังเว็บแอปพลิเคชันของเราที่ทำงานอยู่บนเคสเตรล หากเป็นการทำงานบนวินโดวส์ IIS จะเป็นผู้ทำหน้าที่เดียวกันนี้

หากคุณใช้อาชัวร์เพื่อรองรับแอปพลิเคชันของคุณ ทั้งหมดนี้จะถูกดำเนินการให้โดยอัตโนมัติ สำหรับการทำให้ Nginx เป็นรีเวิร์สพรอกซีจะถูกกล่าวถึงต่อไปในหัวข้อของดอคเกอร์
