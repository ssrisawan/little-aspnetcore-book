## การสร้าง model
มีคลาส model สองคลาสที่จำเป็นต้องถูกสร้างขึ้นมา: คลาสแรก คือ model ที่ใช้แทนรายการสิ่งที่ต้องทำที่ถูกจัดเก็บอยู่ในฐานข้อมูล (บางครั้งเรียกว่า **entity**) และอีกหนึ่ง model ที่จะถูกนำไปรวมเข้ากับ view (นั่นคือส่วนของ **MV** ใน MVC) และถูกส่งกลับไปยังเบราว์เซอร์ของผู้ใช้ แต่เนื่องจากทั้งสองส่วนนี้ถูกเรียกได้ว่าเป็น "model" ทั้งคู่ ดังนั้นจากนี้ไปจะเรียก model ในแบบที่สองว่า **view model**

อันดับแรก ให้สร้างคลาสในชื่อ `TodoItem` ไว้ในไดเรกทอรี Models:

**Models/TodoItem.cs**

```csharp
using System;
using System.ComponentModel.DataAnnotations;

namespace AspNetCoreTodo.Models
{
    public class TodoItem
    {
        public Guid Id { get; set; }
        
        public bool IsDone { get; set; }

        [Required]
        public string Title { get; set; }

        public DateTimeOffset? DueAt { get; set; }
    }
}
```

คลาสนี้ทำหน้าที่กำหนดว่าฐานข้อมูลจะต้องจัดเก็บข้อมูลสำหรับสิ่งที่ต้องทำแต่ละรายการอย่างไร ซึ่งในที่นี้ได้แก่: ID, หัวข้อหรือชื่อ, รายการดังกล่าวเสร็จสิ้นแล้วหรือยัง และวันครบกำหนดของรายการสิ่งที่ต้องทำ โดยแต่ละบรรทัดจะกำหนดหนึ่งคุณสมบัติ (property) ของคลาสดังนี้:

* คุณสมบัติ **Id** เป็น guid ซึ่งย่อมาจาก **g**lobally **u**nique **id**entifier ค่า Guid (หรือ GUID) เป็นสตริงของตัวเลขและตัวอักษรยาว ๆ เช่น `43ec09f2-7f70-4f4b-9559-65011d5781bb` และเนื่องจากค่า guid ถูกสุ่มขึ้นมาและมีความเป็นไปได้น้อยมากที่จะเกิดซ้ำกัน ค่าเหล่านี้จึงมักถูกใช้เป็นหมายเลขเฉพาะของแต่ละรายการ ข้อมูลตัวเลข (จำนวนเต็ม) ก็สามารถถูกใช้เป็นหมายเลขแสดงอัตลักษณ์ของฐานข้อมูลได้เช่นกัน แต่จะต้องกำหนดให้ฐานข้อมูลเพิ่มค่าตัวเลขดังกล่าวเมื่อข้อมูลแถวใหม่ถูกเพิ่มเข้าไปในฐานข้อมูล ในขณะที่ค่า guid ถูกสร้างขึ้นมาแบบสุ่ม จึงไม่ต้องคำนึงถึงการเพิ่มค่าตัวเลขโดยอัตโนมัติเช่นนี้

* คุณสมบัติ **IsDone** เป็นค่าบูลีน (ค่าจริง/เท็จ) ที่มีค่าตั้งต้นเป็นเท็จหรือ `false` สำหรับรายการที่สร้างขึ้นมาใหม่ทั้งหมด โดยคุณจะได้เขียนโค้ดให้สลับคุณสมบัตินี้ให้เป็นจริงหรือ `true` เมื่อผู้ใช้คลิกที่กล่องเลือกของรายการนั้น ๆ ใน view

* คุณสมบัติ **Title** เป็นสตริง (ค่าตัวอักษร) สำหรับเก็บชื่อหรือคำอธิบายของรายการสิ่งที่ต้องทำ โดยคุณลักษณะ `[Required]` บอกให้ ASP.NET Core รู้ว่าสตริงนี้จำเป็นต้องมีข้อมูลและไม่สามารถเป็นค่าว่าง (null) ได้

* คุณสมบัติ **DueAt** เป็นค่า `DateTimeOffset` ซึ่งเป็นชนิดตัวแปรในภาษา C# ที่ใช้เก็บค่าประทับวันที่/เวลาพร้อมกับออฟเซตโซนเวลาจาก UTC ซึ่งการเก็บค่าวันที่ เวลา และออฟเซตโซนเวลาไว้ด้วยกันเช่นนี้ จะช่วยให้สามารถประเมินวันที่ได้อย่างถูกต้องบนระบบที่อยู่ในโซนเวลาที่แตกต่างกันได้

สังเกตเห็นเครื่องหมายคำถาม `?` ที่อยู่ด้านหลังชนิดตัวแปร `DateTimeOffset` ไหม? นั่นเป็นการกำหนดให้คุณสมบัติ DueAt สามารถเป็นค่าว่าง **nullable** ได้ หรือไม่จำเป็นต้องระบุนั่นเอง หากไม่ได้ระบุเครื่องหมาย `?` ไว้ สิ่งที่ต้องทำทุกรายการจะต้องมีวันครบกำหนด  ทั้งนี้ คุณสมบัติ `Id` และ `IsDone` ไม่ได้ถูกกำหนดให้สามารถเป็นค่าว่างได้ ดังนั้นจึงต้องกำหนดค่าให้เสมอ (หรือใช้ค่าตั้งต้นก็ได้)

> สตริงในภาษา C# สามารถเป็นค่าว่างได้เสมอ ดังนั้นจึงไม่จำเป็นต้องกำหนดคุณสมบัติ Title ให้สามารถเป็นค่าว่างได้ ทั้งนี้ สตริงของ C# สามารถเป็นได้ทั้งค่าว่าง (null) เป็นสตริงว่างเปล่า (empty) หรือมีข้อความก็ได้

แต่ละคุณสมบัติข้างต้นจะตามด้วย `get; set;` ซึ่งเป็นข้อความสั้น ๆ ที่ระบุว่าคุณสมบัติดังกล่าวสามารถอ่าน/เขียนได้ (หรือในทางเทคนิคสามารถกล่าวได้ว่ามีเมธอด getter และ setter สำหรับการรับค่าและการกำหนดค่านั่นเอง)

ณ จุดนี้ เทคโนโลยีฐานข้อมูลที่จะถูกนำมาใช้สามารถเป็นอะไรก้ได้ ซึ่งอาจเป็น SQL Server, MySQL, MongoDB, Redis หรืออื่น ๆ ที่แตกต่างจากนี้ เนื่องจาก model นี้จะกำหนดว่าแถวของฐานข้อมูลหรือรายการหนึ่ง ๆ จะมีลักษณะอย่างไรใน C# จึงไม่ต้องกังวลเกี่ยวกับการทำงานที่เฉพาะเจาะจงกับฐานข้อมูลในโค้ดของคุณ ลักษณะของ model ที่ดูเรียบง่ายเช่นนี้ บางครั้งก็เรียกว่า "plain old C# object" หรือ POCO

### View model

ในบางครั้ง model (เอนทิตี) ที่จัดเก็บอยู่ในฐานข้อมูลอาจคล้ายคลึงแต่ *ไม่เหมือนเสียทีเดียว* กับ model ที่คุณต้องการใช้ใน MVC (view model) ซึ่งในกรณีนี้ model `TodoItem` ถูกใช้แทนหนึ่งรายการในฐานข้อมูล แต่ view อาจจำเป็นต้องแสดงรายการสิ่งที่ต้องทำจำนวนสองรายการ สิบรายการ หรือหนึ่งร้อยรายการ (ขึ้นอยู่กับผู้ใช้ว่าได้ปล่อยให้งานค้างเป็นดินพอกหางหมูแค่ไหน)

ด้วยเหตุผลนี้ view model จึงควรถูกแยกออกเป็นอีกหนึ่งคลาสเพื่อเก็บค่าอาเรย์ของ `TodoItem`:

**Models/TodoViewModel.cs**

```csharp
namespace AspNetCoreTodo.Models
{
    public class TodoViewModel
    {
        public TodoItem[] Items { get; set; }
    }
}
```

ในตอนนี้เมื่อเรามี model ต่าง ๆ แล้ว ก็ถึงเวลาที่เราจะสร้าง view ที่จะรับค่า `TodoViewModel` แล้วสร้างโค้ด HTML ได้อย่างถูกต้องเพื่อแสดงรายการสิ่งที่ต้องทำของผู้ใช้
